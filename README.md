# iOS项目初始化

## 安装Cocoapods

```shell
gem source -l
gem source --remove https://rubygems.org/
gem source --add https://gems.ruby-china.com
sudo gem install cocoapods
# 如果Xcode提示pod权限问题
chmod a+x Pods-shiku_im-resources.sh
chmod a+x Pods-shiku_im-frameworks.sh
# 在m系列芯片下，报you may have a encountered a bug in theRuby 
```

## 卸载Cocoapods

[移除pods](https://juejin.cn/post/7196969196445138981)

## pod install和pod update慢

1. ClashX 加本地 sock5 的端口，默认是没有的。在 Clashx→配置→打开本地配置文件，找到「config.yaml」文件打开，然后添加上下面这一行，随后重启 ClashX

```shell
socks-port: 7891
```

2. 为 github 设置默认代理

```shell
git config --global http.https://github.com.proxy socks5://127.0.0.1:7891
```

## pod init 和 pod install报错

```shell
[!] [!] Xcodeproj doesn't know about the following attributes {"minimizedProjectReferenceProxies"=>"1", "preferredProjectObjectVersion"=>"77"} for the 'PBXProject' isa.
If this attribute was generated by Xcode please file an issue: https://github.com/CocoaPods/Xcodeproj/issues/new
```

1. 使用vscode打开项目xxx.xcodeproj文件，找到project.pbxproj，删除minimizedProjectReferenceProxies、preferredProjectObjectVersion，然后将objectVersion值改为56
2. Xcode打开项目，选中项目目录，右键，点击Convert to Group
3. Build Setting设置User Script Sandboxing为NO

## 新版本Xcode报错 libarclite

[下载LibarcliteFiles](https://github.com/kamyarelyasi/Libarclite-Files)后复制到`/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/arc`目录下，没有arc就新建这个目录

## HandyJSON解析问题

更改BuiltInBasicType.swift文件_transform:方法

```swift
static func _transform(from object: Any) -> String? {
/// ...
    case let dic as Dictionary<String, Any>:
        guard let data = try? JSONSerialization.data(withJSONObject: dic, options: .fragmentsAllowed) else {
            return "\(object)"
        }
        return String.init(data: data, encoding: .utf8)
    case let array as Array<Any>:
        guard let data = try? JSONSerialization.data(withJSONObject: array, options: .fragmentsAllowed) else {
            return "\(object)"
        }
        return String.init(data: data, encoding: .utf8)
}
```